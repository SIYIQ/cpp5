# 问题三、四 C++ 求解器

本项目是数学建模竞赛问题三和问题四的C++高性能求解器。

## 项目结构

### 核心模块
- `config.hpp/cpp` - 物理常量和初始状态配置
- `geometry.hpp/cpp` - 几何遮蔽判断算法
- `core_objects.hpp/cpp` - 核心对象（导弹、无人机、烟雾弹等）
- `optimizer.hpp/cpp` - 差分进化优化算法
- `boundary_calculator.hpp/cpp` - 边界条件计算

### 求解程序
- `solve_problem_3.hpp/cpp` - 问题三：单机多弹对抗（FY1投放3枚烟雾弹对抗M1）
- `solve_problem_4.hpp/cpp` - 问题四：多机单弹对抗（FY1、FY2、FY3各投放1枚烟雾弹对抗M1）

## 编译和运行

### 依赖要求
- **C++ 编译器**：支持 C++17 标准
- **CMake**：版本 3.16 或更高
- **Eigen3**：线性代数库
- **OpenMP**（可选）：并行计算支持

### Windows 编译
```cmd
# 创建构建目录
mkdir build
cd build

# 配置项目
cmake .. -G "Visual Studio 16 2019" -A x64

# 编译
cmake --build . --config Release

# 运行问题三
Release\solve_problem_3.exe

# 运行问题四
Release\solve_problem_4.exe
```

### Linux/macOS 编译
```bash
# 创建构建目录
mkdir build && cd build

# 配置项目
cmake .. -DCMAKE_BUILD_TYPE=Release

# 编译
make -j$(nproc)

# 运行问题三
./solve_problem_3

# 运行问题四
./solve_problem_4
```

## 算法特点

### 问题三：单机多弹优化
- **决策变量**：8维 [speed, angle, t_d1, t_f1, delta_t2, t_f2, delta_t3, t_f3]
- **优化策略**：增量时间参数化避免弹药间时间冲突
- **遮蔽判断**：基于关键点覆盖的多烟雾协同判断方法

### 问题四：多机单弹协调
- **决策变量**：12维 [s1, a1, td1, tf1, s2, a2, td2, tf2, s3, a3, td3, tf3]
- **优化策略**：分散式多平台协调，各无人机投放时间完全独立
- **边界计算**：动态计算每架无人机的有效投放时间上边界

### 核心技术
1. **高精度弹道计算**：RK4 四阶龙格-库塔法求解烟雾弹轨迹
2. **几何遮蔽算法**：多阴影锥协同遮蔽判断
3. **差分进化优化**：全局优化处理高度非线性、多模态目标函数
4. **并行计算支持**：OpenMP 加速优化过程

## 性能特点

- **高效的几何计算**：预缓存关键点，避免重复计算
- **优化的数据结构**：使用 `std::array` 和智能指针提高性能
- **内存安全**：RAII 和智能指针避免内存泄漏
- **数值稳定性**：边界检查和异常处理确保算法健壮性

## 输出结果

程序会输出：
1. **优化过程**：每50代显示当前最优值
2. **最终策略**：无人机飞行参数和烟雾弹投放时序
3. **性能指标**：最大有效遮蔽时间和计算耗时

## 扩展功能

- **边界计算工具**：`boundary_calculator_tool` 独立分析投放时间边界
- **参数调优**：修改 `config.hpp` 中的物理参数
- **算法定制**：继承 `ObscurationOptimizer` 实现自定义优化策略

## 故障排除

### 常见问题
1. **Eigen3 未找到**：确保安装了 Eigen3 开发包
2. **编译错误**：检查 C++17 编译器支持
3. **运行时错误**：验证输入参数范围的合理性

### 性能调优
- 增加 `DESettings::popsize` 提高搜索质量
- 增加 `DESettings::maxiter` 延长搜索时间
- 启用 OpenMP 并行计算加速

## 与 Python 版本对比

| 特性 | Python 版本 | C++ 版本 |
|------|-------------|----------|
| 开发速度 | 快 | 中等 |
| 运行性能 | 中等 | 高 |
| 内存使用 | 高 | 低 |
| 数值精度 | 高 | 高 |
| 扩展性 | 好 | 优秀 |

C++ 版本在保持算法精度的同时，显著提升了计算性能，特别适合大规模优化问题。
